# YouTube自動再生-main

YouTubeの動画が終了したら自動で次の動画を再生するChrome拡張機能です。

## 概要

この拡張機能は、YouTubeの視聴体験をより快適にするために開発されました。動画の再生が終わると自動で次の動画へ移行し、途切れることなく連続して楽しめます。さらに、カスタムURLリストの作成や管理、便利なキーボードショートカット機能も備えています。

## 主な機能

---

<div align="center">

| 機能                     | 詳細                                                                                                                                                           |
| :----------------------- | :------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| <b>🎥 自動再生</b>       | YouTube動画の終了を検知し、次の動画を自動で再生。ページ遷移や広告再生にも対応。                                                                                |
| <b>📝 URLリスト管理</b>  | 独自のURLリストを作成・編集し、リスト順に自動再生。ドラッグ＆ドロップで順序変更。                                                                              |
| <b>⌨️ ショートカット</b> | <code>Ctrl+Shift+X</code> (Mac: <code>Command+Shift+X</code>) で即停止、<code>Ctrl+Shift+L</code> (Mac: <code>Command+Shift+L</code>) でリスト先頭動画を開く。 |
| <b>⚙️ 設定管理</b>       | 自動再生ON/OFFやループ、通知の有無などをポップアップから簡単に切替。                                                                                           |
| <b>🔒 安全設計</b>       | 必要最小限の権限のみ要求。個人情報や視聴履歴は一切収集・送信しません。                                                                                         |

## </div>

### 🎥 自動再生機能

- **自動ジャンプ:** 動画終了時に「次の動画」やリスト順で自動再生
- **高精度検知:** ページ遷移・広告再生にも対応
- **一時停止/再開:** ポップアップやショートカットで制御可能

### 📝 URLリスト管理

- **直感的UI:** ポップアップからURL追加・削除・並べ替え
- **ドラッグ＆ドロップ:** 再生順序を自由に変更
- **ストレージ保存:** リスト内容はブラウザに自動保存
- **ワンクリック再生:** 先頭動画を即再生

### ⌨️ キーボードショートカット

- **即停止:** `Ctrl+Shift+X` (Mac: `Command+Shift+X`)
- **クイック再生:** `Ctrl+Shift+L` (Mac: `Command+Shift+L`)
- ショートカットはChromeの拡張機能設定からカスタマイズ可能

### ⚙️ 設定管理

- **ワンタッチ切替:** ポップアップで自動再生ON/OFF
- **ユーザーごと保存:** 設定内容は自動保存
- 今後アップデートで追加設定も予定

### 🔒 安全設計

- **最小権限:** `storage`, `tabs`, `alarms`, `idle` のみ要求
- **プライバシー重視:** 個人情報や視聴履歴は一切収集・送信しません
- 外部通信は明示的な目的のみ

### 🎥 自動再生機能

YouTubeの動画が終了したタイミングをコンテンツスクリプト（`youtube_video_end_alert.js`）が検知し、次の動画を自動で再生します。再生対象は、YouTubeの「次の動画」や、ユーザーが登録したURLリストの順番に従います。

- 動画終了イベントを正確に検出し、ページ遷移や広告再生にも対応。
- 連続再生中は、ユーザー操作なしで次の動画へ自動ジャンプ。
- 途中で自動再生を一時停止・再開することも可能。

### Chrome Web Storeからインストール（推奨）

### 📝 URLリスト管理

独自のURLリストを作成・編集でき、リスト内の動画を順番に自動再生できます。

- ポップアップUIからURLを追加・削除・並べ替え。
- リストの順番はドラッグ＆ドロップで直感的に変更可能。
- リストの内容はブラウザストレージに保存され、再起動後も保持。
- リストの先頭動画をワンクリックまたはショートカットで即再生。

1. Chrome Web Storeで「YouTube自動再生-main」を検索

### ⌨️ キーボードショートカット

拡張機能には便利なショートカットが割り当てられています。

- `Ctrl+Shift+X`（Mac: `Command+Shift+X`）: 現在再生中のYouTube動画を即座に一時停止。
- `Ctrl+Shift+L`（Mac: `Command+Shift+L`）: URLリストの先頭動画を新しいタブで開く。
- これらのショートカットはChromeの拡張機能設定からカスタマイズ可能。

2. 「Chromeに追加」をクリック

### ⚙️ 設定管理

自動再生のON/OFFや、リストの自動ループ、通知の有無など、細かな動作設定が可能です。

- ポップアップ画面からワンタッチで自動再生の有効/無効を切り替え。
- 設定内容はユーザーごとに保存され、次回以降も自動で反映。
- 今後のアップデートで、再生間隔や通知方法などの追加設定も予定。

3. 拡張機能の権限を確認し、「拡張機能を追加」をクリック

### 🔒 安全設計

YouTube公式の利用規約を遵守し、ユーザーのプライバシーや安全性に配慮した設計です。

- 権限は必要最小限（`storage`, `tabs`, `alarms`, `idle`）のみ要求。
- 外部サーバーとの通信は明示的な目的（例: WebSocketによる状態同期）のみ。
- 個人情報や視聴履歴などは一切収集・送信しません。

### 開発者モードでのインストール

1. このリポジトリをダウンロードまたはクローン

```bash
git clone https://github.com/Narcissus-tazetta/youtube-auto-play.git
```

2. Chromeで `chrome://extensions/` を開く
3. 右上の「デベロッパーモード」を有効にする
4. 「パッケージ化されていない拡張機能を読み込む」をクリック
5. ダウンロードしたフォルダを選択

## 使用方法

### 基本的な使い方

1. 拡張機能をインストール後、YouTubeを開く
2. ツールバーの拡張機能アイコンをクリックしてポップアップを開く
3. 自動再生機能をオンにする
4. 動画を再生すると、終了時に自動で次の動画が再生される

### URLリストの管理

1. ポップアップからURLリスト管理画面を開く
2. 「URL追加」ボタンでお気に入り動画のURLを追加
3. リスト内の動画は順番に自動再生される
4. ドラッグ&ドロップで再生順序を変更可能

### キーボードショートカットの活用

- **緊急停止**: `Ctrl+Shift+X` (Mac: `Command+Shift+X`)で即座に動画を停止
- **クイックアクセス**: `Ctrl+Shift+L` (Mac: `Command+Shift+L`)でリスト最初の動画を開く

## 技術仕様

### 対応ブラウザ

- Google Chrome (Manifest V3対応)
- Microsoft Edge (Chromium版)
- その他Chromiumベースブラウザ

### 権限

- `storage`: 設定とURLリストの保存
- `tabs`: タブの管理と操作
- `alarms`: スケジュール機能
- `idle`: アイドル状態の検知

### ファイル構成

```
youtube自動再生-main/
├── manifest.json              # 拡張機能の設定ファイル
├── popup.html                 # ポップアップのHTML
├── popup.css                  # ポップアップのスタイル
├── content.js                 # YouTubeページに挿入されるスクリプト
├── youtube_video_end_alert.js # 動画終了検知スクリプト
├── socket.io.min.js          # WebSocket通信ライブラリ
├── src/
│   ├── bg/                   # バックグラウンドスクリプト
│   │   ├── background.js
│   │   ├── bg_message_handler.js
│   │   ├── bg_socket_events.js
│   │   ├── bg_tab_manager.js
│   │   ├── bg_utils.js
│   │   └── bg_youtube_state.js
│   ├── common/               # 共通ユーティリティ
│   │   ├── popup_utils.js
│   │   └── schedule.js
│   └── ui/                   # ユーザーインターフェース
│       ├── popup_autoplay_toggle.js
│       ├── popup_controls.js
│       ├── popup_main.js
│       └── popup_url_list.js
```

## 開発

### 開発環境のセットアップ

```bash
git clone https://github.com/Narcissus-tazetta/youtube-auto-play.git
cd youtube-auto-play
```

### デバッグ方法

1. Chrome拡張機能管理画面で「検証」をクリック
2. 開発者ツールでコンソールログを確認
3. バックグラウンドスクリプトとコンテンツスクリプトの両方をチェック

### ビルド・デプロイ

```bash
# 全ファイルをGitに追加
git add .

# コミット
git commit -m "機能追加: [説明]"

# GitHubにプッシュ
git push origin main
```

**注意**: この拡張機能はYouTubeの利用規約に準拠して開発されています。過度な自動化はYouTubeのサービス品質に影響を与える可能性があるため、適切に使用してください。
